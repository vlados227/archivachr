<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte operations</title>
    <style>
        #numberInput {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <center>
        <main>
            <h2>Преобразование в систему счисления</h2>

            <input placeholder="число" id="numberInput">
            <input placeholder="основание" type="number" id="radix" min="2" max="36" value="2" >
            <div id="output"></div>

            <h2>Битовые операции</h2>

            <input placeholder="2 значения разделенные пробелами" type="text" id="bits">
            <div id="bitand"></div>
            <div id="bitor"></div>
            <div id="xor"></div>
        </main>
    </center>
    <script>
        function useDebounce(func, time = 500) {
            if (typeof func != "function")
                throw new Error(`First argument is type: ${typeof func}, want function.\n Maybe wrap with () => {}`);
            let timeout;
            return function(...args) {
                clearTimeout(timeout);

                timeout = setTimeout(() => 
                    func.apply(this, args)
                , time);
            }
        }

        const numberInput = document.getElementById("numberInput");
        const radixInput = document.getElementById("radix");
        const numberOutput = document.getElementById("output");

        const bitwiseOpsInput = document.getElementById("bits");
        const bitand = document.getElementById("bitand");
        const bitor = document.getElementById("bitor");
        const xor = document.getElementById("xor");

        var radix = 2;
        const isNumber = /^(0[xodb]{1}[a-f0-9]+)|\d+/ig;

        function castInteger(x) {
            // console.info(x, " cast")
            numberOutput.textContent = Number(x || 0).toString(parseInt(radix)).toUpperCase();
        }

        function displayBitwiseOps(x, y) {
            bitand.textContent = `${x} & ${y} = ${x & y}`;
            bitor.textContent = `${x} | ${y} = ${x | y}`;
            xor.textContent = `${x} ^ ${y} = ${x ^ y}`;
        }

        radixInput.addEventListener("input", (e) => {
            var x = numberInput.value.match(isNumber)[0];
            radix = e.target.value;
            castInteger(x);
        });

        numberInput.addEventListener("change", (e) => {
            var x = e.target.value.match(isNumber)[0];
            console.log(x);
            castInteger(x);
        });

        bitwiseOpsInput.addEventListener("change", (e) => {
            var ops = e.target.value.match(isNumber) || [0, 0];
            displayBitwiseOps(ops[0], ops[1]);
        })

    </script>
</body>
</html>